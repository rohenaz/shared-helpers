!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var h=n[a]={exports:{}};t[a][0].call(h.exports,(function(e){return r(t[a][1][e]||e)}),h,h.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(e){var n="application/x-postmate-v1+json",i=0,r=function(){var e;return d.debug?(e=console).log.apply(e,arguments):null},o={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},a=function(e,t){return("string"!=typeof t||e.origin===t)&&(!!e.data&&(("object"!=typeof e.data||"postmate"in e.data)&&(e.data.type===n&&!!o[e.data.postmate])))},s=function(){function t(t){var n=this;this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.events={},"production"!==e.env.NODE_ENV&&(r("Parent: Registering API"),r("Parent: Awaiting messages...")),this.listener=function(t){if(!a(t,n.childOrigin))return!1;var i=((t||{}).data||{}).value||{},o=i.data,s=i.name;"emit"===t.data.postmate&&("production"!==e.env.NODE_ENV&&r("Parent: Received event emission: "+s),s in n.events&&n.events[s].call(n,o))},this.parent.addEventListener("message",this.listener,!1),"production"!==e.env.NODE_ENV&&r("Parent: Awaiting event emissions from Child")}var o=t.prototype;return o.get=function(e){var t=this;return new d.Promise((function(r){var o=++i;t.parent.addEventListener("message",(function e(n){n.data.uid===o&&"reply"===n.data.postmate&&(t.parent.removeEventListener("message",e,!1),r(n.data.value))}),!1),t.child.postMessage({postmate:"request",type:n,property:e,uid:o},t.childOrigin)}))},o.call=function(e,t){this.child.postMessage({postmate:"call",type:n,property:e,data:t},this.childOrigin)},o.on=function(e,t){this.events[e]=t},o.destroy=function(){"production"!==e.env.NODE_ENV&&r("Parent: Destroying Postmate instance"),window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)},t}(),c=function(){function t(t){var i=this;this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,"production"!==e.env.NODE_ENV&&(r("Child: Registering API"),r("Child: Awaiting messages...")),this.child.addEventListener("message",(function(t){if(a(t,i.parentOrigin)){"production"!==e.env.NODE_ENV&&r("Child: Received request",t.data);var o=t.data,s=o.property,c=o.uid,h=o.data;"call"!==t.data.postmate?function(e,t){var n="function"==typeof e[t]?e[t]():e[t];return d.Promise.resolve(n)}(i.model,s).then((function(e){return t.source.postMessage({property:s,postmate:"reply",type:n,uid:c,value:e},t.origin)})):s in i.model&&"function"==typeof i.model[s]&&i.model[s](h)}}))}return t.prototype.emit=function(t,i){"production"!==e.env.NODE_ENV&&r('Child: Emitting Event "'+t+'"',i),this.parent.postMessage({postmate:"emit",type:n,value:{name:t,data:i}},this.parentOrigin)},t}(),d=function(){function t(e){var t=e.container,n=void 0===t?void 0!==n?n:document.body:t,i=e.model,r=e.url,o=e.name,a=e.classListArray,s=void 0===a?[]:a;return this.parent=window,this.frame=document.createElement("iframe"),this.frame.name=o||"",this.frame.classList.add.apply(this.frame.classList,s),n.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=i||{},this.sendHandshake(r)}return t.prototype.sendHandshake=function(i){var o,c=this,d=function(e){var t=document.createElement("a");t.href=e;var n=t.protocol.length>4?t.protocol:window.location.protocol,i=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||n+"//"+i}(i),h=0;return new t.Promise((function(t,u){c.parent.addEventListener("message",(function n(i){return!!a(i,d)&&("handshake-reply"===i.data.postmate?(clearInterval(o),"production"!==e.env.NODE_ENV&&r("Parent: Received handshake reply from Child"),c.parent.removeEventListener("message",n,!1),c.childOrigin=i.origin,"production"!==e.env.NODE_ENV&&r("Parent: Saving Child origin",c.childOrigin),t(new s(c))):("production"!==e.env.NODE_ENV&&r("Parent: Invalid handshake reply"),u("Failed handshake")))}),!1);var l=function(){h++,"production"!==e.env.NODE_ENV&&r("Parent: Sending handshake attempt "+h,{childOrigin:d}),c.child.postMessage({postmate:"handshake",type:n,model:c.model},d),5===h&&clearInterval(o)},p=function(){l(),o=setInterval(l,500)};c.frame.attachEvent?c.frame.attachEvent("onload",p):c.frame.onload=p,"production"!==e.env.NODE_ENV&&r("Parent: Loading frame",{url:i}),c.frame.src=i}))},t}();d.debug=!1,d.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),d.Model=function(){function t(e){return this.child=window,this.model=e,this.parent=this.child.parent,this.sendHandshakeReply()}return t.prototype.sendHandshakeReply=function(){var t=this;return new d.Promise((function(i,o){t.child.addEventListener("message",(function a(s){if(s.data.postmate){if("handshake"===s.data.postmate){"production"!==e.env.NODE_ENV&&r("Child: Received handshake from Parent"),t.child.removeEventListener("message",a,!1),"production"!==e.env.NODE_ENV&&r("Child: Sending handshake reply to Parent"),s.source.postMessage({postmate:"handshake-reply",type:n},s.origin),t.parentOrigin=s.origin;var d=s.data.model;return d&&(Object.keys(d).forEach((function(e){t.model[e]=d[e]})),"production"!==e.env.NODE_ENV&&r("Child: Inherited and extended model from Parent")),"production"!==e.env.NODE_ENV&&r("Child: Saving Parent origin",t.parentOrigin),i(new c(t))}return o("Handshake Reply Failed")}}),!1)}))},t}(),t.exports=d}).call(this,e("_process"))},{_process:2}],2:[function(e,t,n){var i,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var d,h=[],u=!1,l=-1;function p(){u&&d&&(u=!1,d.length?h=d.concat(h):l=-1,h.length&&m())}function m(){if(!u){var e=c(p);u=!0;for(var t=h.length;t;){for(d=h,h=[];++l<t;)d&&d[l].run();l=-1,t=h.length}d=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new f(e,t)),1!==h.length||u||c(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(e,t,n){const i=e("postmate"),r="https://auth-frontend.twetch.com";const o=new class{async init(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".twetchAuthFrame {\n\t\t\tborder: none;\n\t\t\toverflow: hidden;\n\t\t\twidth: 100vw;\n\t\t\theight: 100%;\n\t\t\tposition: fixed;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t}",document.getElementsByTagName("head")[0].appendChild(e);const t=new URLSearchParams(window.location.search).get("tncpw_session");this.child=await new i({container:document.body,url:t?`${r}/sign-up?tncpw_session=${t}`:r,classListArray:["twetchAuthFrame"]}),this.iframe=this.child.frame,this.child.on("init",e=>{this.displayIframe(),this.didInit=!0})}displayIframe(){this.iframe.style.height="100%",this.iframe.style.width="100vw"}hideIframe(){this.iframe.style.width="0px",this.iframe.style.height="0px"}token(){return new Promise((e,t)=>{this.child.on("tokenTwetchAuth",({token:t})=>e(t))})}logout(){}};o.init(),window.twetchAuth=o},{postmate:1}]},{},[3]);